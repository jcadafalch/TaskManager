@using GestorTareas.Client.Components.Etiqueta

<MudCard Elevation="3" Style="width: 100%; height: 100%">
    <MudCardHeader Class="pt-2">
        <CardHeaderContent>
            <MudText Typo="Typo.h6">@Tarea.Title</MudText>
            <MudText Typo="Typo.caption">@Tarea.CreatedAt</MudText>
            @if (Action == "All")
            {
                <br />
                <MudChip Variant="Variant.Text" Size="Size.Small" Color="@(TareaStatus ? Color.Success : Color.Error)">@(TareaStatus ? "Completada" : "Pendiente")</MudChip>
            }
        </CardHeaderContent>
        <CardHeaderActions>
            @if (Action == "All")
            {
                <MudMenu Icon="@Icons.Filled.Settings" Class="pt-1" Size="Size.Small" ActivationEvent="@MouseEvent.MouseOver" AnchorOrigin="Origin.BottomCenter" TransformOrigin="Origin.TopCenter">
                    <ChildContent>
                        <MudMenuItem OnClick="@ChangeStatus">Completar / Descompletar</MudMenuItem>
                        <MudMenuItem OnClick="@ModifyTarea">Modificar</MudMenuItem>
                        <MudMenuItem OnClick="@DeleteTareaAsync">Eliminar</MudMenuItem>
                        <MudMenuItem OnClick="@AddEtiquetaToTarea">Añadir Etiqueta</MudMenuItem>
                        <MudMenuItem OnClick="@RemoveEtiquetaToTarea">Quitar Etiqueta</MudMenuItem>
                    </ChildContent>
                </MudMenu>
            }
            else
            {
                <MudCheckBox T="bool" Checked="@TareaStatus" Color="@(TareaStatus ? Color.Success : Color.Secondary)" CheckedChanged="CheckBoxChanged" Disabled="Action is null ? false : true" />
            }

        </CardHeaderActions>
    </MudCardHeader>
    <MudCardContent Class="mt-n8">
        <MudDivider Light Class="mb-1" />
        <MudText Class="py-3">@Tarea.Content</MudText>
        @if (Action == "All")
        {
            <MudDivider Light Class="mb-3" />
            @if (Tarea.Etiquetas is not null && Tarea.Etiquetas.Any())
            {
                @foreach (var etiqueta in Tarea.Etiquetas)
                {
                    <EtiquetaDesignComponent Etiqueta="etiqueta" />
                }
            }
        }
    </MudCardContent>
    @if (Action == "Delete" || Action == "Modify")
    {
        <MudCardActions>
            @if (Action == "Modify")
            {
                <MudButton Variant="Variant.Text" Color="Color.Warning" OnClick="@ModifyTarea">Editar</MudButton>
            }

            @if (Action == "Delete")
            {
                <MudButton OnClick="DeleteTareaAsync" Variant="Variant.Filled" Color="Color.Error">Delete Tarea</MudButton>
            }
        </MudCardActions>
    }

</MudCard>